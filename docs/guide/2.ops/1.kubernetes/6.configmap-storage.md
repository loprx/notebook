---
title: é…ç½®ç®¡ç†
order: 6
---


# ğŸ“¦ é…ç½®ç®¡ç†

## ğŸ”§ ConfigMap

**ConfigMap** ç”¨äºå­˜å‚¨éæ•æ„Ÿçš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°ã€ç¯å¢ƒå˜é‡ç­‰ã€‚

* **ä½œç”¨**ï¼š

  * è§£è€¦é…ç½®å’Œå®¹å™¨é•œåƒã€‚
  * åœ¨ä¸é‡å»ºé•œåƒçš„æƒ…å†µä¸‹æ›´æ–°åº”ç”¨é…ç½®ã€‚

* **ä½¿ç”¨æ–¹å¼**ï¼š

  * ä»¥ç¯å¢ƒå˜é‡çš„å½¢å¼æ³¨å…¥å®¹å™¨ã€‚
  * æŒ‚è½½ä¸º Volume æ–‡ä»¶ã€‚
  * é€šè¿‡ CLI æˆ– YAML åˆ›å»ºå¹¶å¼•ç”¨ã€‚

* **ç¤ºä¾‹**ï¼š

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_ENV: "production"
  LOG_LEVEL: "debug"
```

```yaml
envFrom:
  - configMapRef:
      name: app-config
```

---

## ğŸ” Secret

**Secret** ç”¨äºå­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚å¯†ç ã€API Tokenã€è¯ä¹¦ç­‰ã€‚

* **ç‰¹ç‚¹**ï¼š

  * æ•°æ®ä»¥ Base64 ç¼–ç ã€‚
  * å¯ä½œä¸ºç¯å¢ƒå˜é‡æˆ– Volume ä½¿ç”¨ã€‚
  * æ”¯æŒ RBAC æƒé™æ§åˆ¶ã€‚

* **åˆ›å»ºæ–¹å¼**ï¼š

  * CLI æ–¹å¼ï¼š

```bash
kubectl create secret generic my-secret --from-literal=password=123456
```

* YAML æ–‡ä»¶æ–¹å¼ï¼ˆéœ€ base64 ç¼–ç ï¼‰ï¼š

```yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-secret
type: Opaque
data:
  password: MTIzNDU2
```

---

## ğŸ“ SubPath

**SubPath** ç”¨äºå°†æŸä¸ªå·ä¸­çš„å­è·¯å¾„æŒ‚è½½åˆ°å®¹å™¨æŒ‡å®šè·¯å¾„ã€‚

* **ç”¨é€”**ï¼š

  * å¤šä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªå·ä½†åªè®¿é—®ä¸åŒå­ç›®å½•ã€‚
  * è®©é…ç½®æ–‡ä»¶ç‹¬å æŸä¸ªæŒ‚è½½è·¯å¾„ã€‚

* **ç¤ºä¾‹**ï¼š

```yaml
volumeMounts:
  - name: config
    mountPath: /etc/config/app.conf
    subPath: app.conf
```

---

# ğŸ—„ï¸ å­˜å‚¨ç®¡ç†

---

## ğŸ–¥ï¸ HostPath

**HostPath** å°†å®¿ä¸»æœºçš„æŸä¸ªç›®å½•æŒ‚è½½åˆ° Pod å†…ã€‚

* **é€‚ç”¨åœºæ™¯**ï¼š

  * æ—¥å¿—é‡‡é›†ã€‚
  * æœ¬åœ°æµ‹è¯•ã€‚
  * æ³¨æ„ï¼šä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼ˆå­˜åœ¨å®‰å…¨é£é™©ï¼‰ã€‚

* **ç¤ºä¾‹**ï¼š

```yaml
volumes:
  - name: host-volume
    hostPath:
      path: /data/logs
      type: Directory
```

---

## ğŸ“‚ EmptyDir

**EmptyDir** æ˜¯åœ¨ Pod åˆ›å»ºæ—¶è¢«åˆå§‹åŒ–çš„ä¸´æ—¶å­˜å‚¨ã€‚

* **ç‰¹ç‚¹**ï¼š

  * å®¹å™¨é‡å¯æ•°æ®ä¸ä¸¢å¤±ã€‚
  * Pod åˆ é™¤åæ•°æ®å³æ¸…ç©ºã€‚
  * å¯ç”¨äºå®¹å™¨é—´æ•°æ®å…±äº«ã€ç¼“å­˜ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚

* **ç¤ºä¾‹**ï¼š

```yaml
volumes:
  - name: cache
    emptyDir: {}
```

---

# ğŸŒ NFS

**NFSï¼ˆNetwork File Systemï¼‰** æ˜¯ä¸€ç§å…±äº«æ–‡ä»¶å­˜å‚¨æ–¹å¼ï¼Œå¤šä¸ª Pod å¯ä»¥åŒæ—¶è¯»å†™ã€‚

* **ç‰¹ç‚¹**ï¼š

  * è·¨èŠ‚ç‚¹å…±äº«ã€‚
  * éœ€äº‹å…ˆéƒ¨ç½² NFS æœåŠ¡ã€‚
  * è¯»å†™æƒé™éœ€é…ç½®åˆç†ã€‚

* **ç¤ºä¾‹**ï¼š

```yaml
volumes:
  - name: nfs-volume
    nfs:
      server: 10.0.0.1
      path: /exports/data
```

---

# ğŸ“„ PV / PVCï¼ˆæŒä¹…å·ï¼‰

### âœ… PersistentVolumeï¼ˆPVï¼‰

* é›†ç¾¤ç®¡ç†å‘˜æå‰é…ç½®çš„å­˜å‚¨èµ„æºã€‚
* æŠ½è±¡åº•å±‚å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ NFSã€äº‘ç›˜ç­‰ï¼‰ã€‚

### âœ… PersistentVolumeClaimï¼ˆPVCï¼‰

* ç”¨æˆ·ç”³è¯·å­˜å‚¨çš„å£°æ˜ã€‚

* ç³»ç»Ÿä¼šè‡ªåŠ¨åŒ¹é…æ»¡è¶³éœ€æ±‚çš„ PVã€‚

* **ç¤ºä¾‹**ï¼š

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
```

---

# ğŸ“¦ å­˜å‚¨ç±»ï¼ˆStorageClassï¼‰

**StorageClass** å®šä¹‰äº†å­˜å‚¨å·çš„ç±»å‹ã€é…ç½®ç­–ç•¥ã€åŠ¨æ€ä¾›åº”æ–¹å¼ç­‰ã€‚

* **ç”¨é€”**ï¼š

  * å®ç° PVC è‡ªåŠ¨ç»‘å®šä¸å·åˆ›å»ºã€‚
  * æ”¯æŒä¸åŒçº§åˆ«æ€§èƒ½ï¼ˆå¦‚ SSDã€æ™®é€šç£ç›˜ç­‰ï¼‰ã€‚

* **ç¤ºä¾‹**ï¼šaws

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp2
```

* **ç¤ºä¾‹**ï¼šlocal-path

```bash
kubectl apply -f https://raw.githubusercontent.com/rancher/local-path-provisioner/v0.0.29/deploy/local-path-storage.yaml

kubectl -n local-path-storage logs -f -l app=local-path-provisioner
```

PVC ç¤ºä¾‹ï¼š

```yaml
spec:
  storageClassName: fast
```
